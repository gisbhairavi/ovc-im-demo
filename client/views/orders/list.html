
<style>
body {
	overflow-y:hidden !important; 
}
</style>
<transaction-history></transaction-history>

<div class="row add_tit ng-scope">
	<div class="col-lg-12">
       <h3 class="page-header clearfix">
			<div class="col-md-4 trans_det"> {{ovcLabel.poOrder.revieworder}}</div>
			 <div class="col-md-4 view_num"></div>
			  <div class="col-md-4 v_progress">
			  	<div class="pull-right">
					  <span class="label status" ng-class="{'alert-received': ordrstatus == 'Received','alert-submitted': ordrstatus == 'Submitted','alert-inprogress':ordrstatus=='In Progress','alert-confirmed':ordrstatus=='Confirmed','alert-partiallyshipped':ordrstatus=='Partially Shipped','alert-returned':ordrstatus=='Returned','alert-shipped':ordrstatus=='Shipped','alert-cancelled':ordrstatus=='Cancelled','alert-Completed':ordrstatus=='Completed','alert-cancelled':ordrstatus=='Force Closed'}">{{ordrstatus}}
					  </span>
				</div>
			</div>
		</h3>
	</div>  
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->
	<section ng-controller="TranstabCntrl as tab">
		<div class="pro_menu  clearfix">
			<ul class="nav nav-pills">
				<li ng-class="{active:tab.isSet(1)}"><a href id="desc_detail" ng-click="tab.setTab(1)">{{ovcLabel.poOrder.summary}}</a></li>
				<li ng-class="{active:tab.isSet(2)}"><a href id="rule_detail" ng-click="tab.setTab(2); ">{{ovcLabel.poOrder.shipments}}</a></li>
				<!-- <li ng-class="{active:tab.isSet(3)}"><a href id="rule_detail" ng-click="tab.setTab(3)">{{translation.purchaseorders[0].history}}</a></li> -->
				<li style="float:right;margin-top:9px;margin-right:15px;">
					<div ng-if="tab.isSet(1)">
						<ovcdata-export pdf-id="order_summary_export" heading="{{ovcLabel.poOrder.export.title}}" type="summary"></ovcdata-export>
					</div>
					<div ng-if="tab.isSet(2)">
						<ovcdata-export pdf-id="order_summary_export" heading="{{ovcLabel.poOrder.export.title}}" type="shipment"></ovcdata-export>
					</div>
				</li>
			</ul>
			
			
		 </div>
		<div class="row r_margin ng-scope">
			<div class="ven_tblk clearfix">
				<div class="col-md-12">
					<div class="panel-default">
							<div class="panel-body search_box">
								<div class="row">
									<div class="col-lg-12 purs_order"  >
										<div class="col-md-4 trans_det export_pre_header" >
											<p class="clearfix" ng-hide="!(orderdetails.purchaseOrderNumber)"><label class="mar_al view_p">{{ovcLabel.poOrder.list.ordernumber}} </label><span class="view_ot">: {{orderdetails.purchaseOrderNumber}}</span></p>
											<p class="clearfix" ng-hide="!(orderdetails.erpPurchaseOrder)"><label class="mar_al view_p">{{ovcLabel.poOrder.list.erorder}} </label><span class="view_ot">: {{orderdetails.erpPurchaseOrder}}</span></p>
											<p class="clearfix" ng-hide="!(purchasetype)"><label class="mar_al view_p">{{ovcLabel.poOrder.ordertype}} </label><span class="view_ot">: {{purchasetype}}</span></p>
											<!-- <p class="clearfix" ng-hide="!(orderFrom)"><label class="mar_al view_p">{{translation.purchaseorders[0].order_form}}: </label><span class="view_ot">{{orderFrom}}</span></p> -->
											<p class="clearfix" ng-hide="!(orderdetails.purchaseOrderDate)"><label class="mar_al view_p">{{ovcLabel.poOrder.orderdate}} </label><span class="view_ot">: {{orderdetails.purchaseOrderDate | dateForm}}</span></p>
											<p class="clearfix"><label class="mar_al view_p">{{ovcLabel.poOrder.createdby}}</label><span class="view_ot">: {{orderdetails.createduser}}</span></p>
											<p class="clearfix" ng-show="orderdetails.erpNotes"><label class="mar_al view_p">{{ovcLabel.poOrder.erpNotes}} </label><span class="view_ot">: {{orderdetails.erpNotes}}</span></p>
										</div>
										<div class="col-md-4 trans_det export_pre_header" >
											<p class="clearfix" ng-hide="!(orderFrom)"><label class="mar_al view_p">{{ovcLabel.poOrder.orderform}} </label><span class="view_ot">: {{orderFrom}}</span></p>
											<p class="clearfix" ng-hide="!(shiptoloc)"><label class="mar_al view_p">{{ovcLabel.poOrder.shiptostore}} </label><span class="view_ot">: {{shiptoloc}}</span></p>
											<p ng-if = "config.config_arr.enableMarkForLocation.featureValue" class="clearfix" ng-hide="!(markforloc)"><label class="mar_al view_p">{{ovcLabel.poOrder.markfor}} </label><span class="view_ot">: {{markforloc}}</span></p>


											<p class="clearfix" ng-if	=	"billto	==	true " ng-hide="!(billtoStore) && !showbill"> <label class="mar_al view_p">{{ovcLabel.poOrder.billto}}</label><span class="view_ot">: {{billtostoreId}}</span> </p>
											<p class="clearfix" ng-hide="!(spmethod) && !showbill"> <label class="mar_al view_p">{{ovcLabel.poOrder.shippingmethod}}</label><span class="view_ot">: {{spmethod}}</span></p>
											<p class="clearfix" ng-if="enableNeedByDate">
											<label class="mar_al view_p">{{ovcLabel.poOrder.needbydate}}</label>
											<span class="view_ot" >: {{needByDate | dateForm}}</span>
											</p>
										</div>
										<div class="col-md-4 export_pre_header">
											
											<p><label class="mar_al view_amt">{{ovcLabel.poOrder.totalqty}}</label><span>: <label class="view_tot">{{orderdetails.numberOfProducts}}</label></span></p>
											<p ng-if="userRolePermissions.permissions.viewPurchasePrice"><label class="mar_al view_amt">{{ovcLabel.poOrder.subtotal}}</label><span>: <label class="view_tot">{{currency}}{{orderdetails.PoSubtotalAsn ? orderdetails.PoSubtotalAsn : orderdetails.PoSubtotalConfirm ? orderdetails.PoSubtotalConfirm : orderdetails.PoSubtotal | number:2}}</label></span></p>
											<p  ng-if="userRolePermissions.permissions.viewPurchasePrice && puprice"><label class="mar_al view_amt">{{ovcLabel.poOrder.tax}}</label><span>: <label class="view_tot">{{currency}}{{orderdetails.totalPoTaxAsn ? orderdetails.totalPoTaxAsn : orderdetails.totalPoTaxConfirm ? orderdetails.totalPoTaxConfirm :orderdetails.totalPoTax | number:2}}</label></span></p>

											<p ng-if="userRolePermissions.permissions.viewPurchasePrice"><label class="mar_al view_amt">{{ovcLabel.poOrder.total}}</label><span>: <label class="view_tot">{{currency}}{{orderdetails.totalPoCostAsn ? orderdetails.totalPoCostAsn : orderdetails.totalPoCostConfirm ? orderdetails.totalPoCostConfirm : orderdetails.totalPoCost | number:2}}</label></span></p>
										</div>	
									</div>
								</div>
							</div>
						</div>
				</div>
			</div>
		</div>
		 <form role="form" name="form" >
			<div ng-show="tab.isSet(1)">
				<div class="row r_margin ng-scope">
				<div class="ven_tblk clearfix">
					<div class="col-md-12">
						<div class="panel-default">
							<!-- <div class="col-md-4 search_b">
										<span>{{translation.buttontypes[0].search}}:</span>
										<input id="search" class="form-control" type="text" placeholder="" ng-model="search"  ng-disabled="molporder" name="search">
										</div> -->
							<form role="forms"  >
								<div class="panel-default">			
									<div class="ven_tbody ">
										<div>
										<!--Style Grouping in Summary Screen-->
											<div class="row" ng-if="!withPagination" style="padding: 10px;">
												<grouped-style></grouped-style>
											</div>
											<div ng-if="withPagination" class="clearfix">
												<span class = "col-md-4 pull-right" ng-show = "summaryView" style="margin-bottom: 10px">
													<label > {{ovcLabel.asnPackage.search}}:</label>
													<input id="search" class="form-control" type="text" placeholder="Search by SKU,Description..." ng-model="search"   name="search" />
												</span>						
												<grouped-style  template-url="modules/styleGroup/SKU_Group_PO.html" skuitems="skuslist" ></grouped-style>
											</div>
											
											<!-- <div class="col-md-12" ng-show="(filteredItems > 0) && (rplorder=='true') ">     -->
											<div class="col-md-12" ng-show="rplorder && !withPagination">    
												<div class="panel-body fliter_i" ng-if="filteredItems > 0">

													<!-- <div pagination="" page="action.currentPage" max-size="5"  on-select-page="setPage(page)" boundary-links="true" total-items="filteredItems" items-per-page="entryLimit" class="pagination-small" previous-text="&laquo;" next-text="&raquo;"></div> -->
													<uib-pagination total-items="config.showskugroup ? itemslength : filteredItems"  items-per-page ="action.entryLimit"  ng-model="currentPage"  max-size = "5"  boundary-links="true" ng-change="pageChanged(currentPage);" ></uib-pagination>
												
													<div class="col-md-3 pglimit">
														<div class="pg_limit">
															<label>{{ovcLabel.poOrder.list.pagesize}}:</label>
															<select convert-to-number ng-model="entryLimit" class="pgsizes">
																<option>10</option>
																<option>20</option>
																<option>50</option>
																<option>100</option>
															</select>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</form>
						</div>
						<div class="save_can acc_det clearfix" ng-if="userRolePermissions.orderPermissions.copyOrder && purchasetype !== ovcLabel.global.orderType.RPL">
							<div class="col-md-12">
								<div class="pull-right">
								<!-- <button class="btn btn-primary ng-binding" ng-click="transaction_add(t_add,balanlist)" type="submit">{{translation.purchaseorders[0].preview}}</button> -->
								<button type="button" id="ovcCopyBtn" class="btn btn-primary ng-binding" ng-click="porder_copy(orderdetails._id , orderdetails.purchaseOrderNumber)" >{{ovcLabel.poOrder.copy}}</button>
								<!-- <button class="btn btn-primary ng-binding" ng-disabled="molporder" >{{translation.purchaseorders[0].force_close}}</button> -->
								</div>
							</div>
					</div>
				</div>
				</div>
			</div>
			</div>
			<div ng-show="tab.isSet(2)">
				<asn-table mode = "order"></asn-table>
			</div>
		 </form>
	    </section>

