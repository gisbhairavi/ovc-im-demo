<button class="col-md-12 text-left btn btn-default" ng-if="dash" ng-click="redirect()">
	<i class="fa fa-arrow-left" aria-hidden="true"></i>
	{{translation.buttontypes[0].backtodashboard}}
</button>
<div class="row header_blk">
    <div class="col-lg-12">
        <h3 class="page-header"> {{ovcLabel.poOrder.list.heading}}
			<div class="pull-right add_ven clearfix">
				<a id="ovcAddBtn" ui-sref="ovc.purchaseorder-add"   title="{{ovcLabel.poOrder.list.add}}" class="btn btn-primary" ng-class = "{disabled:molporder}"><i class="fa fa-plus-circle"></i>{{ovcLabel.poOrder.list.add}} </a>
				<span ng-if="list.length > 0">
					<ovcdata-export pdf-id="orderlist_export" heading="{{ovcLabel.poOrder.list.heading}}"></ovcdata-export>
				</span>
			</div>
		</h3>
    </div>
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->
<div class="row r_margin">
<div class="ven_tblk clearfix">
    <div class="col-lg-12">
        <div class="panel-default">
            <!-- /.panel-heading -->
            <div class="panel-body search_box">
                <div class="row">					
					<form>
					<div class="col-md-12  purchase_sech clearfix">
						
						<div class="col-sm-12 col-md-3">
									<label class="control-label">{{ovcLabel.poOrder.list.fromdate}}</label>
									<input calendar  id="common_fromdate" ng-model='srchOrderData.fromDate'  class="form-control hidcal"  ng-change='change_frdate()'  />
						
						</div>
						<div class="col-sm-12 col-md-3">
									<label class="control-label">{{ovcLabel.poOrder.list.todate}}</label>
									<input calendar  id="common_todate" ng-model='srchOrderData.toDate'  class="form-control hidcal" ng-change='change_todate()' />
						
						</div>
						<!-- <div class="col-sm-3">
							<label class="control-label">{{translation.locations[0].store}}</label>
							
							<select ng-options="col.id as col.displayName for col in storeDatas" class="form-control" name="shiptostore"  ng-model="srchOrderData.shipToStore"  ><option value="">-- {{translation.locations[0].select_store}} --</option></select>
						</div> -->
						<span class="col-sm-12 col-md-3"> 
							<label class="control-label">{{ovcLabel.poOrder.list.location}}</label><br />
							<div click-out="showLoc=false" class="dropdown col-sm-12" style="padding-left: 0px;" >
								<div style="position: relative;" class="tooltip-pro">
									<input type="text" id="common_heirarchy_check" class="form-control"
										ng-model="location.displayName" ng-focus="showLoc = true"
										placeholder="{{ovcLabel.poOrder.list.location}}"
										style="padding: 6px 18px 6px 10px;"
										ng-change="searchLocation(location.displayName);" tooltip-placement="bottom" uib-tooltip="{{location.title}}"/> <span
										class="fa"
										ng-class="{'fa-caret-up' : showLoc, 'fa-caret-down' : ! showLoc}"
										style="position: absolute; right: 7px; top: 10px;"></span>
								</div>
								<div tree-view="storeLocData" node-search="filterSearch()" check-box = "true"
									node-label="name" ng-show="showLoc"
									class="dropdown-menu treeViewDrop"
									style="display: block; width: 300px;" mode="listlocation"></div>
							</div>
						</span>
						<div class= "col-sm-12 col-md-3">
							<label class="control-label">{{ovcLabel.poOrder.list.status}}</label>
				 			<div id="ovcStatusDrop" multiselect-common="" items="statusData.statusList" selected-items="statusData.statusSelected" naming={{translation.locations[0].status}} dynamic="Status"></div>
				 		</div>
						
						<!-- <div class="col-sm-3">
							<label class="control-label">{{translation.vendors[0].status}}</label>
							
							<select ng-options="col.code as  col.label for col in orderStatusList | orderBy:'label' " class="form-control" name="orstatus" id="orstatus" ng-model="srchOrderData.orderStatus" ><option value="">-- {{translation.vendors[0].status}} --</option></select>
						</div> -->
						
					</div>
		<div class="col-md-12 col-sm-12 col-xs-12 clearfix">
		
		<div class="col-sm-12 col-md-3">
						
				<label class="control-label">{{ovcLabel.poOrder.list.ordernumber}}</label>
				<input id="ordernumber" type="text"  name="ponumber" id="search" ng-model='srchOrderData.purchaseOrderNumber'   class="form-control" />
			
		</div>
		
		<div class="col-sm-12 col-md-3">
						
				<label class="control-label">{{ovcLabel.poOrder.list.erorder}}</label>
				<input type="text"  name="erpnumber" id="erpsearch" ng-model='srchOrderData.erpNumber'   class="form-control" />
			
		</div>
		<div class="col-sm-12 col-md-3 trans-search">
			<a class='btn' id="ovcAdvancedBtn" ng-click="advanceSearch()">{{advanced?ovcLabel.poOrder.buttons.basic:ovcLabel.poOrder.buttons.advanced}}</a>
		</div>
		<br clear="all">
		<div class="advsearch" ng-if="advSearch.isAdvanceSearch === true">
			<div class = "row">
				<advanced-search></advanced-search>
			</div>
		</div>
		
						<div class="col-sm-12 col-md-3 search_btns porder_srch">
							<button id="ovcSearchBtn" type="submit" id="searchtrigger" class="btn btn-primary ng-binding" ng-click="searchPurchaseOrder(); dashremove();" style="margin-right:10px;"><i class="fa fa-search" style="margin-right:3px;"></i>{{ovcLabel.poOrder.buttons.search}}</button>
							<button id="ovcResetBtn" type="reset" class="btn btn-primary rst_btn ng-binding" ng-click="purchaseOrderReset()" ><i class="fa fa-refresh" style="margin-right:3px;"></i>{{ovcLabel.poOrder.buttons.reset}}</button>
						</div>
						
						<span  ng-show="fieldsrequired  && submitted" class="alert alert-danger ng-binding datevalid" >{{ovcLabel.poOrder.error.date}}</span>
						</div>
					</form>
				</div>
				</div>
                <!-- /.table-responsive -->

              <div class="ven_tbody">
				<div class="row">
					<div class="table-responsive col-md-12" ng-if="filteredItems > 0" >
						<table class="table table-striped table-bordered" iphone-view id="orderlist_export" >
						<thead>
						
							<th >{{ovcLabel.poOrder.list.orderno}}&nbsp;<a class="sort_align" ng-click="sort_by('purchaseOrderNumber');"><i class="fa " ng-class="{'fa-sort': predicate!='purchaseOrderNumber','fa-sort-asc': predicate=='purchaseOrderNumber' && reverse===false,'fa-sort-desc': predicate=='purchaseOrderNumber' && reverse===true}"></i></a></th>
							<th >{{ovcLabel.poOrder.list.erorderno}}&nbsp;<a class="sort_align" ng-click="sort_by('erpPurchaseOrder');"><i class="fa " ng-class="{'fa-sort': predicate!='erpPurchaseOrder','fa-sort-asc': predicate=='erpPurchaseOrder' && reverse===false,'fa-sort-desc': predicate=='erpPurchaseOrder' && reverse===true}"></i></a></th>
							<th>{{ovcLabel.poOrder.list.ordertype}} &nbsp;<a class="sort_align" ng-click="sort_by('ordertype');"><i class="fa " ng-class="{'fa-sort': predicate!='ordertype','fa-sort-asc': predicate=='ordertype' && reverse===false,'fa-sort-desc': predicate=='ordertype' && reverse===true}"></i></a></th>
							<th  width="115px">{{ovcLabel.poOrder.list.status}}&nbsp;<a class="sort_align" ng-click="sort_by('orderStatus');"><i class="fa " ng-class="{'fa-sort': predicate!='orderStatus','fa-sort-asc': predicate=='orderStatus' && reverse===false,'fa-sort-desc': predicate=='orderStatus' && reverse===true}"></i></a></th>
							<th>{{ovcLabel.poOrder.list.noOfSkus}}&nbsp;<a class="sort_align" ng-click="sort_by('numberOfSKU');"><i class="fa " ng-class="{'fa-sort': predicate!='numberOfSKU','fa-sort-asc': predicate=='numberOfSKU' && reverse===false,'fa-sort-desc': predicate=='numberOfSKU' && reverse===true}"></i></a></th>
							<th>{{ovcLabel.poOrder.list.recipient}}</th>
							<th ng-show="vencol">{{ovcLabel.poOrder.list.vendor}}</th>
							<th  ng-if="userRolePermissions.permissions.viewPurchasePrice">{{ovcLabel.poOrder.list.totalcost}}&nbsp;<a class="sort_align" ng-click="sort_by('totalPoCost');"><i class="fa " ng-class="{'fa-sort': predicate!='totalPoCost','fa-sort-asc': predicate=='totalPoCost' && reverse===false,'fa-sort-desc': predicate=='totalPoCost' && reverse===true}"></i></a></th>
							<th style="width: 90px;">{{ovcLabel.poOrder.list.created}}&nbsp;<a class="sort_align" ng-click="sort_by('created');"><i class="fa " ng-class="{'fa-sort': predicate!='created','fa-sort-asc': predicate=='created' && reverse===false,'fa-sort-desc': predicate=='created' && reverse===true}"></i></a></th>
							<th data-hidePdf="true" class="hideExport" ng-if="userRolePermissions.orderPermissions.copyOrder">{{ovcLabel.poOrder.list.action}}</th>
						</thead>
						<tbody>
							
							<tr ng-repeat="data in list  | orderBy : predicate :reverse" ng-class="((data.purchaseOrderType)=='RPL')? 'class-yellow' : 'yellow'">
							
								<td class="name_li">
									<!--karthick changed-->
									<a ui-sref="ovc.vieworders-list({porderid:data._id, selectTab:'summary'})" ng-if = "['received', 'submitted', 'inProgress', 'Submitted','cancelled','Completed', 'forceClosed'].indexOf(data.orderStatusKey)!=-1" >{{data.purchaseOrderNumber}}</a>

									<a ui-sref="ovc.purchaseorder-edit({porderid:data._id})" ng-if="((data.orderStatus)=='draft' || (data.orderStatus)=='Draft')" data-hidePdf="true" class="hideExport">
									{{data.purchaseOrderNumber}} </a>
								</td>
								<td>{{data.erpPurchaseOrder}}</td>
								<td>{{data.orderType}}</td>
								<td>{{data.orderStatus}}</td>
								<td>{{!data.numberOfSKU ? 0 : data.numberOfSKU}}</td><!-- karthick changed -->
								<td class="name_li">{{data.recipient}}</td>
								<td  ng-show="vencol" class="name_li">{{data.vendorName}}</td>
								<td ng-if="userRolePermissions.permissions.viewPurchasePrice">{{data.currency}}{{data.totalPoCostAsn ? data.totalPoCostAsn : data.totalPoCostConfirm ? data.totalPoCostConfirm : data.totalPoCost |number : 2}}
								<!-- {{data.totalPoCostConfirm != undefined ? data.totalPoCostConfirm : data.totalPoCost}} --></td>
								<td>{{data.created | datetimeForm}}</td>
								<td data-hidePdf="true" class="hideExport" ng-if="(userRolePermissions.orderPermissions.copyOrder)">
									<a href="" ng-if="(data.orderType !== ovcLabel.global.orderType.RPL)" ng-click="purchaseOrderCopy(data._id , data.purchaseOrderNumber)" class="btn btn-primary del_i"><i class="fa fa-files-o"></i>
									</a>
								</td>
							</tr>
						</tbody>
						</table>
					</div>
					<div id="ovcError" class="col-md-12 panel-body" ng-if="filteredItems == 0">
						<div class="col-md-12">
							<h4>{{ovcLabel.poOrder.error.noOrder}}</h4>
						</div>
					</div>
					<div class="col-md-12" ng-show="filteredItems > 0">    
					<div class="panel-body fliter_i">

						<uib-pagination total-items="filteredItems"  items-per-page ="entryLimit"  ng-model="currentPage"  max-size = "5"  boundary-links="true" ng-change="pageChanged();" ></uib-pagination>
						
						<div class="col-md-3 pglimit">
							<div class="pg_limit page_size_drdn">
								<label>{{ovcLabel.poOrder.list.pagesize}}:</label>
								<select  convert-to-number	ng-model="entryLimit" class="pgsizes" ng-change="searchPurchaseOrder()">
									<option>10</option>
									<option>20</option>
									<option>50</option>
									<option>100</option>
								</select>
							</div>
						</div>
						</div>
					</div>
					
				</div>
				
            </div>
            <!-- /.panel-body -->
        </div>
		</div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
</div>
</div>
<style>
	body{
		overflow-y: hidden;
	}
</style>
